!function(a){"use strict";function b(a){return null!=a}function c(a){return a!==!1&&b(a)}function d(a){return"-"==a[0]}function e(){var c=a.first(arguments);return b(c)?c.concat.apply(c,a.rest(arguments)):[]}function f(b,c){return e([b],a.toArray(c))}function g(a,b){return a.substr(b||1,a.length)}function h(b){return a.difference(a.keys(b),a.map(a.rest(arguments),g))}function i(b,c){if(a.isArray(c)){if(a.some(c,d)){var g=a.filter(c,d);return a.map(b,function(b){return a.pick.apply(null,f(b,h.apply(null,f(b,g))))})}var i=a.filter(c,a.isObject);if(i.length>0){var k=a.assign.apply({},i);c=e(a.filter(c,a.isString),a.values(k)),b=x(b,k)}return a.map(b,function(b){return a.pick.apply(null,f(b,c))})}return a.isObject(c)?a.map(b,function(a){return j(a,c)}):[]}function j(b,c){var d=[];for(var e in c)if(a.isObject(b[e])&&(d=[].concat(d,j(b[e],c[e]))),!a.isObject(b[e])&&!a.isArray(b[e])){var f={},g=e;g!==c[e]&&(g=c[e]),f[g]=b[e],d.push(f)}return a.assign.apply({},d)}function k(b,c){var d=a.has(c,"$or")?"some":"every";return a.filter(b,function(b){return a[d](c,function(a,c){return l(b,c,a,d)})})}function l(b,c,d,e){return a[e](d,function(a,d){return"$in"===d?m(b,c,a):"$eq"===d?n(b,c,a):"$noeq"===d?o(b,c,a):"$gt"===d?p(b,c,a):"$gte"===d?p(b,c,a,!0):"$lt"===d?q(b,c,a):"$lte"===d?q(b,c,a,!0):"$has"===d?t(b,c,a):"$between"===d?u(b,c,a):"$regex"===d?v(b,c,a):!1})}function m(b,c,d){return a.isArray(d)?-1!==d.indexOf(b[c]):a.isString(d)&&a.isString(b[c])?-1!==b[c].indexOf(d):!1}function n(b,c,d){return a.isArray(b[c])?b[c].length===d:a.isEqual(b[c],d)}function o(b,c,d){return!a.isEqual(b[c],d)}function p(b,c,d,e){return a.isArray(b[c])?r(b[c].length,d,e):a.isNumber(b[c])?r(b[c],d,e):a.isDate(b[c])&&a.isDate(d)?r(b[c].getTime(),d.getTime(),e):!1}function q(b,c,d,e){return a.isArray(b[c])?s(b[c].length,d,e):a.isNumber(b[c])?s(b[c],d,e):a.isDate(b[c])&&a.isDate(d)?s(b[c].getTime(),d.getTime(),e):!1}function r(a,b,c){return c===!0?a>=b:a>b}function s(a,b,c){return c===!0?b>=a:b>a}function t(b,c,d){return a.has(b,c)===d}function u(b,c,d){return a.isNumber(b[c])&&a.isArray(d)?b[c]>=d[0]&&b[c]<=d[1]:a.isDate(b[c])&&a.isArray(d)?b[c].getTime()>=d[0]&&b[c].getTime()<=d[1]:!1}function v(a,b,c){try{var d=c instanceof RegExp?c:new RegExp(c);return d.test(a[b])}catch(e){return!1}}function w(b,c){return a.reduce(c,function(c,d,e){return a.has(b,e)?(c[d]=b[e],c):c},a.omit.apply(null,f(b,a.keys(c))))}function x(b,c){return a.map(b,function(a){return w(a,c)})}function y(b,c){return a.map(a.pick.apply(null,f(b,c)),function(a){return a})}function z(b,c){return a.every(c,function(c){return a.contains(b,c)})}function A(b,c,d){var e=a.pluck(c,d);return a.filter(b,function(b){return-1===a.indexOf(e,b[d])})}function B(b,c,d){return a.findIndex(b,function(a){return a[c]===d})}function C(b,c){return e.apply(null,a.map(b,function(b){return c?a.table(b,c):b}))}function D(b,c,d){return a.assign({},{id:b[c]},{data:a.toArray(d===!0?b:a.omit(b,c))})}function E(b,c,d){d=a.isString(d)?d:"id";var f=a.last(arguments);f=a.isBoolean(f)?f:!1;var g=b;return c&&(g=a.table(g,e([d],c))),a.map(g,function(a){return D.call(null,a,d,f)})}function F(b,c,d){var e=d&&d.$strict===!0;return a.each(c,function(c,d){var f=a.isFunction(c);if(!e||f||typeof c==typeof b[d])if(f){var g;try{g=c.call(null,b)}catch(h){}e?typeof g==typeof b[d]&&(b[d]=g):b[d]=g}else b[d]=a.isPlainObject(c)?a.clone(c,!0):c}),b}function G(b,c){var d=c.$or===!0?"some":"every";return a[d](c,function(a,c){return l(b,c,a,d)})}function H(b,c,d){if(a.isEmpty(c))return b;var e=a.isPlainObject(d);a.map(b,function(a){if(e){var b=G(a,d);return b?F(a,c,d):a}return F(a,c,d)})}var I=this,a=I._;if("object"!=typeof a&&"function"==typeof require&&(a=require("lodash")),"function"!=typeof a)throw Error("fupslot.lodash.extend required lodash");a.mixin({existy:b,truthy:c,cat:e,construct:f,table:i,extract:j,rename:w,as:x,query:k,valuesOf:y,containAll:z,differenceBy:A,findIndexBy:B,concatBy:C,keyss:h,toJsonFormat:E,modify:H}),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=a)}.call(this);